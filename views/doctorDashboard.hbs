<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Doctor Dashboard</title>
    <link rel="stylesheet" href="/style.css">
</head>
<body class="doctor-dashboard-bg">
    {{> doctorNavbar}}
    <div class="doctor-dashboard-container">
        <aside class="doctor-sidebar">
            <div class="doctor-profile">
                <img src="{{#if doctor.image}}{{doctor.image}}{{else}}/default-doctor.png{{/if}}" alt="Doctor Avatar" class="doctor-avatar-sidebar">
                <div class="doctor-name-sidebar">Dr. {{doctor.name}}</div>
                <div class="doctor-specialty-sidebar">{{doctor.specialty}}</div>
            </div>
            <nav class="doctor-nav">
                <a href="/doctor/dashboard" class="active"><span>🏠</span> Dashboard</a>
                <a href="/doctor/dashboard"><span>📅</span> Appointments</a>
                {{!-- <a href="#"><span>👥</span> Patients</a>
                <a href="#"><span>💬</span> Messages</a>
                <a href="#"><span>⚙️</span> Settings</a> --}}
            </nav>
        </aside>
        <main class="doctor-main-content">
            <div class="doctor-dashboard-header">
                <h1>Appointments</h1>
            </div>
           <div class="doctor-tabs">
    <a href="/doctor/dashboard?tab=upcoming" class="{{#if (eq tab 'upcoming')}}tab-active{{/if}}">Upcoming</a>
    <a href="/doctor/dashboard?tab=past" class="{{#if (eq tab 'past')}}tab-active{{/if}}">Past</a>
    <a href="/doctor/dashboard?tab=cancelled" class="{{#if (eq tab 'cancelled')}}tab-active{{/if}}">Cancelled</a>
    <a href="/doctor/dashboard?tab=pending" class="{{#if (eq tab 'pending')}}tab-active{{/if}}">Pending</a>
</div>
            <div class="appointments-section">
            <ul class="appointments-list">
{{#each appointments}}
    <li class="appointment-item">
        <img src="{{#if this.patient.image}}{{this.patient.image}}{{else}}/default-patient.png{{/if}}" alt="Patient" class="patient-avatar">
        <div class="appointment-details">
            <div class="patient-name">
                Patient Name: {{#if this.patient.name}}{{this.patient.name}}{{else}}{{this.patient.username}}{{/if}}
            </div>
            <div class="appointment-time">Appointment Time: {{this.time}}</div>
                        <div class="appointment-time">Appointment Date: {{this.date}}</div>

            <div class="appointment-reason">Appointment Reason: {{this.reason}}</div>
            <div class="appointment-status">
                Status: <strong>{{this.status}}</strong>
            </div>
        </div>
        {{#if (eq this.status "pending")}}
        <div class="appointment-actions">
            <form action="/doctor/appointment/{{this._id}}/accept" method="POST">
                <button type="submit" class="submit-btn">Accept</button>
            </form>
            <form action="/doctor/appointment/{{this._id}}/reject" method="POST">
                <button type="submit" class="submit-btn" style="background:#e57373;">Reject</button>
            </form>
        </div>
        {{/if}}
    </li>
{{/each}}
</ul>
            </div>
        </main>
    </div>
</body>
</html>